
<h2>Login or register page</h2>

<h4>Login or register now to access our smile posts and chatrooms</h4>

<div id="login">
    <br>
    <h3 id="itxt">Login at Smiles.com</h3>
    <hr>
    <br>
    <input type="text" placeholder="Username" id="username" /> 
    </br>
    <input type="password" placeholder="Password" id="password" />
    </br>

    <div>
        <br>
        <button type="submit" onclick="login()" class="loginButton">Login</button>
        <br>
        <br>
        <button id="showModal" class="createButton">Opret ny bruger</button>
    </div>
</div>



<h4 id="response"></h4>



<!-- Leg med Modal starter her-->

<div id="modal" class="hidden-modal"> 
    <h3>Create new user</h3>
    <label>Name:</label>
    <input id="username"/>
    <br>
    <label>Age:</label>
    <input id="password"/>
    <br>
    <button id="reg-button">Register new user</button>
    <button id="close-button">Close</button>
</div>
<!-- Leg med Modal slutter her-->

<script>
    
    async function login() {
        const username = document.getElementById("username").value 
        const password = document.getElementById("password").value 
        let user = {};
        let responseMessage = "";
        if(username && password != undefined){
            user.username = username;
            user.password = password;
        }
        const res = await fetch(`/auth/login`, {
            headers: {
                "content-type": "application/json",
            },
            method: "POST",
            body: JSON.stringify(user),
        });
        responseMessage = await res.text();

        if (res.status == 201) {
            console.log("Det gik godt!")
        } else {
            
        console.log("Det gik skidt!")
        }

        document.getElementById("response").innerText=responseMessage
    }

    // MODAL

    function showEditModal(){
		modal.class = 'shown-modal';
	}

	function hideEditModal(){
		modal.class = 'hidden-modal';
	}

    function setHandlers() {
        document.getElementById("showModal").onclick=showEditModal
        document.getElementById("close-button").onclick=hideEditModal
    }

    // Slutter her

</script>
