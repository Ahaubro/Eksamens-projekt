<div>
    <h1>Search</h1>
    <input id="search-input"/><button onclick="newSearch()">Search</button>
    <br>
    <br>
    <div id="search-results"></div>
</div>

<script>

    let searchInput = document.getElementById("search-input");
    let searchResults = document.getElementById("search-results");
    
    let searchQuery = "%%QUERY%%";
    search(searchQuery);

    function newSearch(){
        let searchQuery = searchInput.value;
        window.location.href = '/search/' + searchQuery;
    }

    async function search(searchQuery){
        searchInput.value = searchQuery;
        console.log("Searching for:", searchQuery);
        const response = await fetch('/api/search/' + searchQuery);
        const users = await response.json();
        showResults(users);
    }

    function showResults(users){
        searchResults.innerHTML = "";
        for(let i in users){
            searchResults.innerHTML += `
                <div>
                    <b><a href="/profile/${users[i].id}">${users[i].username}</a></b>
                </div><br>
            `;
        }
    }
</script>